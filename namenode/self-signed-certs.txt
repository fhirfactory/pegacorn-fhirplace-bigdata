openssl ecparam -name prime256v1 -genkey -noout -out ca.key

# Generate the Certificate Authority Certificate
openssl req -new -x509 -sha256 -key ca.key -out ca.crt

Step 2: Server Certificate
# Generate the Server Certificate Private Key
openssl ecparam -name prime256v1 -genkey -noout -out server.key

# Generate the Server Certificate Signing Request
openssl req -new -sha256 -key server.key -out server.csr

# Generate the Server Certificate
openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out pegacorn-fhirplace-namenode.site-a.crt -days 1000 -sha256


Step 3: Client Certificate
# Generate the Client Certificate Private Key
openssl ecparam -name prime256v1 -genkey -noout -out client.key

# Create the Client Certificate Signing Request  
openssl req -new -sha256 -key client.key -out client.csr

#  Generate the Client Certificate
openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out pegacorn-fhirplace-datanode-alpha.site-a.crt -days 1000 -sha256


For importing into java keystore

keytool -import -file pegacorn-fhirplace-namenode.site-a.crt -alias namenode -keystore namenode-truststore.jks  

openssl pkcs12 -export -in pegacorn-fhirplace-namenode.site-a.crt -inkey server.key -certfile pegacorn-fhirplace-namenode.site-a.crt -name "namenodecert" -out pegacorn-fhirplace-namenode.site-a.p12

keytool -importkeystore -srckeystore pegacorn-fhirplace-namenode.site-a.p12 -srcstoretype pkcs12 -destkeystore NameNode.jks -deststoretype JKS

####################################################
keytool -import -file pegacorn-fhirplace-datanode-alpha.site-a.crt -alias datanode -keystore datanode-alpha-truststore.jks

openssl pkcs12 -export -in pegacorn-fhirplace-datanode-alpha.site-a.crt -inkey client.key -certfile pegacorn-fhirplace-datanode-alpha.site-a.crt -name "datanodecert" -out pegacorn-fhirplace-datanode-alpha.site-a.p12

keytool -importkeystore -srckeystore pegacorn-fhirplace-datanode-alpha.site-a.p12 -srcstoretype pkcs12 -destkeystore DataNode.jks -deststoretype JKS

# Use common truststore for all nodes.
keytool -import -noprompt -alias hostone -file pegacorn-fhirplace-namenode.site-a.crt -keystore pegacorn-hadoop-truststore.jks -storepass hadoop

keytool -import -noprompt -alias hosttwo -file pegacorn-fhirplace-datanode-alpha.site-a.crt -keystore pegacorn-hadoop-truststore.jks -storepass hadoop

/usr/local/share/ca-certificates
sudo update-ca-certificates
